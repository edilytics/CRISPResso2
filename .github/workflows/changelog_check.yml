name: Changelog Check

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  changelog-check:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
      with:
        fetch-depth: 0

    - name: Check if CHANGELOG.md was updated
      run: |
        if git diff --name-only origin/${{ github.event.pull_request.base.ref }}...HEAD | grep -q '^CHANGELOG.md$'; then
          echo "CHANGELOG.md has been updated."
        else
          echo "::warning::CHANGELOG.md has not been updated in this PR. Please consider adding a changelog entry."
        fi
